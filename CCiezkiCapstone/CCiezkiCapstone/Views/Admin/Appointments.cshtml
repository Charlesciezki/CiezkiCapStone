@model IEnumerable<CCiezkiCapstone.Models.FullcalendarModel>

@{ 
    ViewBag.Title = "Appointments";
    Layout = "~/Views/Shared/_Admin_Layout.cshtml";
    List<List<Object>> theAppointments = new List<List<Object>>();

}
@foreach (var item in Model)
{
    theAppointments.Add(new List<object>() {item.title, item.date, item.start, item.description, item.event_id });
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Admin Appointment Control Page</title>
</head>
<body>
    <div>
        <h2>Appointments</h2>
        @*@using (Html.BeginForm("Index", "Home"))
        {
            @Html.AntiForgeryToken()
            <input type="submit" value="Programs" class="btn btn-default" />
        }*@

        @section scripts{
            <script type="text/javascript">

                $(document).ready(function () {
                    var date = new Date();
                    var d = date.getDate();
                    var m = date.getMonth();
                    var y = date.getFullYear();
                    var calendar = $('#calendar').fullCalendar({
                        theme: true,
                        header: {
                            left: 'prev,next today',
                            center: 'title',
                            right: 'month, agendaWeek, agendaDay'
                        },
                        defaultView: 'month',
                        editable: true,
                        allDaySlot: false,
                        selectable: true,
                        slotMinutes: 15,
                        select: function(start, end, allDay)
                        {
                            //var title = prompt('Event Title:');
                            //if (title)
                            //{
                            var events = @Html.Raw(Json.Encode(theAppointments));
                            for(var i = 0; i < events.length; i++){
                                calendar.fullCalendar('renderEvent', 
                                    {

                                        title: events[i][0],
                                        start: events[i][1],
                                        end: events[i][1],
                                        allDay: false
                                    },
                                    true 
                                );
                            }
                            //}
                            
                            calendar.fullCalendar('unselect');
                        },
                        //},
                       // editable: true,
                        events: [],                        
                        //});
                    });
                    });                
            </script>
        }
        <div class="row">
            <div class="col-md-12">
                <div id="calendar">
                </div>
            </div>
        </div>
</body>
</html>

